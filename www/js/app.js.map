{"version":3,"sources":["app/application.coffee","app/devel.coffee","app/init.coffee"],"names":[],"mappings":"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","file":"www/js/app.js","sourcesContent":["ChoicesSingleton = require \"models/choices\"\nJobModel = require \"models/job\"\nJobCollection = require \"models/job-collection\"\n\nPageView = require \"views/page\"\nCollectionFormView = require \"views/collection-form\"\nCollectionListView = require \"views/collection-list\"\nJobElementFormView = require \"views/job-element-form\"\nJobListView = require \"views/job-list\"\nJobView = require \"views/job\"\nBrowseView = require 'views/browse'\nDeleteBrowseView = require 'views/delete-browse'\n\nmodule.exports = class Application extends Backbone.Router\n  # Collection of jobs\n  _jobs: null\n\n  # Current job view\n  _current: null\n\n  _pages: null\n\n  _steps:\n    home:\n      prev: \"home\"\n    create:\n      next: \"add.concrete\"\n    concrete:\n      prev: \"add.create\"\n      next: \"add.labor\"\n    labor:\n      prev: \"add.concrete\"\n      next: \"add.materials\"\n    materials:\n      prev: \"add.labor\"\n      next: \"add.equipment\"\n    equipment:\n      prev: \"add.materials\"\n      next: \"add.subcontractor\"\n    subcontractor:\n      prev: \"add.equipment\"\n      next: \"add.save\"\n    save:\n      prev: \"add.subcontractor\"\n\n  routes:\n    \"\": \"home\"\n    \"home\": \"home\"\n    \"open\": \"open\"\n    \"browse\": \"browse\"\n    \"delete-browse\": \"deleteBrowse\"\n    \"read.:id\": \"read\"\n    \"add(.:routeType)\": \"add\"\n    \"edit(.:routeType)\": \"edit\"\n    \"delete-job.:id\": \"deleteJob\"\n    \"delete-group.:group_id\": \"deleteGroup\"\n\n  initialize: (opts) ->\n    console.log \"Initializing Appstruction\"\n\n    # Load the saved jobs\n    @_jobs = new JobCollection null,\n      model: JobModel\n      modelType: \"job\"\n      url: \"jobs\"\n\n    @_jobs.fetch()\n\n    # Populate the form with a blank job\n    @_createJob()\n\n    # Bind DOM events\n    @_bindEvents()\n\n    # Return\n    @\n\n  home: ->\n    console.log \"Loading home page\"\n\n    # Create new (empty) job\n    @_createJob()\n\n    # Initialize pages object\n    @_pages = {}\n\n    # Create the page only once\n    unless @_pages[\"home\"]?\n      @_pages[\"home\"] = new PageView\n        id: \"home\"\n        title: \"Concrete Estimator\"\n        text:\n          id: \"start\"\n          content: \"\"\n\n      # Load the page\n      @_setPage @_pages[\"home\"]\n\n    @_showPage @_pages[\"home\"]\n\n  browse: ->\n    console.log \"Loading browse page\"\n\n    # Create the page only once\n    unless @_pages[\"browse\"]?\n      @_pages[\"browse\"] = new PageView\n        id: \"browse\"\n        title: \"Load an Estimate\"\n        subView: new BrowseView\n          routeType: 'browse'\n\n      # Load the page\n      @_setPage @_pages[\"browse\"]\n\n    @_showPage @_pages[\"browse\"]\n\n  deleteBrowse: ->\n    console.log \"Loading delete-browse page\"\n\n    # Create the page only once\n    unless @_pages[\"delete-browse\"]?\n      @_pages[\"delete-browse\"] = new PageView\n        id: \"delete-browse\"\n        title: \"Delete an Estimate\"\n        subView: new DeleteBrowseView\n          routeType: 'delete-browse'\n\n      # Load the page\n      @_setPage @_pages[\"delete-browse\"]\n\n    @_showPage @_pages[\"delete-browse\"]\n\n  read: (id) ->\n    console.log \"Loading job listing page\"\n    routeType = \"read-#{id}\"\n    unless @_pages[routeType]?\n      @_readJob id\n      @_pages[routeType] = new PageView\n        title: @_current.attributes.job_name\n        subView: new JobView\n          model: @_current\n          routeType: 'read'\n\n      @_setPage @_pages[routeType]\n    @_showPage @_pages[routeType]\n\n  add: (routeType = \"create\") ->\n    console.log \"Loading #{routeType} component page\"\n    @_viewJob(routeType)\n\n  edit: (routeType = 'create') ->\n    console.log \"Editing #{routeType} component page\"\n    @_viewJob(routeType, 'edit')\n\n  # delete a saved job\n  deleteJob: (id, navigate_home=true) ->\n    console.log 'Deleting job'\n    @_readJob id\n    ChoicesSingleton.removeJobGroup @_current\n    ChoicesSingleton.save()\n    @_resetJob(navigate_home)\n\n  # delete a saved group and all of its jobs\n  deleteGroup: (group_id) ->\n    console.log 'Deleting group'\n    group_models = @_jobs.byGroupId(group_id)\n    ids = _.pluck(group_models, 'id')\n    @deleteJob(id, false) for id in ids\n    @_navigate 'home'\n\n  # Tell jQuery Mobile to change the damn page\n  _setPage: (page) ->\n    $(\"body\").append page.render().$el\n    true\n\n  _showPage: (page) ->\n    $(\"section\").hide()\n    page.$el.show()\n    true\n\n  # Bind jQuery events\n  _bindEvents: ->\n    console.log \"Binding events\"\n\n    # Save job button\n    $(document).hammer().on \"tap\", \"button.job.save\", @_saveJob\n\n    # Bind URL clicks\n    $(document).hammer().on \"tap\", \"button.ccma-navigate\", @_navigateEvent\n    $(document).hammer().on \"tap\", \"button.ccma-navigate\", @_updateHeader\n    $(document).hammer().on \"tap\", \"button.ccma-navigate\", @_updateCost\n\n    # Add job component buttons\n    $(document).hammer().on \"tap\", \"button.add\", @_validateComponent\n\n    # Reset job button\n    $(document).hammer().on \"tap\", \"button.job.reset\", @_resetJob\n\n    # Handle application events\n    $(document).hammer().on \"change\", \".field\", @_updateCost\n\n    # Help popup\n    $(document).hammer().on \"tap\", \".header-help\", @_showHelp\n    $(document).hammer().on \"tap\", \".field-help\", @_showHelp\n\n    # Email\n    $(document).hammer().on \"tap\", \".header-email\", @_promptEmail\n\n    # Pdf\n    $(document).hammer().on \"tap\", \".header-pdf\", @_promptPdf\n\n    true\n\n  # Handle navigation\n  _navigateEvent: (evt) ->\n    evt.preventDefault()\n    path = $(evt.currentTarget).data \"path\"\n    Backbone.history.navigate path, true\n    $(\"nav button\").removeClass \"active\"\n    pathNav = path.split \".\", 1\n    $(\"nav button.#{pathNav}\").addClass \"active\"\n\n  _navigate: (path) ->\n    Backbone.history.navigate path, true\n    $(\"nav button\").removeClass \"active\"\n    pathNav = path.split \".\", 1\n    $(\"nav button.#{pathNav}\").addClass \"active\"\n\n  # Create new job\n  _createJob: =>\n    console.log \"Creating new job\"\n    @_current = new JobModel\n    @_current\n\n  # Load a saved job\n  _readJob: (id) =>\n    console.log \"Reading job #{id}\"\n    @_current = @_jobs.get id\n    @_current\n\n  # View the current job\n  _viewJob: (routeType = \"create\", viewType = \"add\") =>\n    console.log \"Viewing job\"\n\n    # Create the page only once\n    unless @_pages[routeType]?\n      # Form component\n      view = null\n      collection = null\n\n      if routeType in ChoicesSingleton.get('job_routes')\n        collection = @_current.get(routeType)\n\n      if collection?\n        console.log \"Creating #{routeType} collection form view\"\n        view = new CollectionFormView\n          title: routeType\n          routeType: routeType\n          collection: collection\n          step: @_steps[routeType]\n      else\n        console.log \"Creating job element form view\"\n        if routeType in ['create', 'save']\n          view = new JobElementFormView\n            title: routeType\n            routeType: routeType\n            model: @_current\n            step: @_steps[routeType]\n\n      # Create the page\n      @_pages[routeType] = new PageView\n        id: routeType\n        title: \"Job Builder\"\n        subView: view\n\n      # Add the first component row\n      if viewType == 'add'\n        @_addComponent routeType\n\n      # Load the page\n      @_setPage @_pages[routeType]\n\n    @_showPage @_pages[routeType]\n\n  # Recalculate the loaded job\n  _updateCost: =>\n    console.log \"Recalculating job cost\"\n    cost = @_current.calculate() if @_current?\n    $('.subtotal').text cost.toFixed(2)\n    @_current\n\n  # Refresh the displayed job name\n  _updateHeader: (currentRoute = null) =>\n    console.log \"Refreshing header\"\n\n    # When called from an event, the event object is passed as parameter.\n    # In that scenario we want currentRoute to be null at this point.\n    if typeof currentRoute != 'string'\n      currentRoute = null\n\n    currentRoute = currentRoute || Backbone.history.fragment\n    return if not currentRoute?\n\n    allowedRoutes = [\n      \"add.concrete\"\n      \"add.labor\"\n      \"add.materials\"\n      \"add.equipment\"\n      \"add.subcontractor\"\n      \"add.save\"\n      \"edit.concrete\"\n      \"edit.labor\"\n      \"edit.materials\"\n      \"edit.equipment\"\n      \"edit.subcontractor\"\n    ]\n\n    headerJobName = $('div.header-job-name')\n    headerTitle = $('div.header-title').find('h3')\n    headerText = headerTitle.find('.header-text')\n    headerHelp = headerTitle.find('.header-help')\n    headerEmail = headerTitle.find('.header-email')\n    headerPdf = headerTitle.find('.header-pdf')\n\n    if currentRoute[0..3] == 'read' or currentRoute in allowedRoutes\n      headerJobName.find('h3').text @_current.attributes.job_name\n      headerJobName.show()\n      routeType = currentRoute.split('.')\n      routeType = routeType[routeType.length - 1]\n      if routeType in ChoicesSingleton.get('job_routes')\n        headerText.text routeType\n    else\n      headerJobName.hide()\n\n    help = ChoicesSingleton.getHelp(routeType)\n    if help?\n      headerHelp.data('help', help)\n      headerHelp.show()\n    else\n      headerHelp.hide()\n\n    if currentRoute == 'add.save'\n      headerEmail.show()\n      headerPdf.show()\n    else\n      headerEmail.hide()\n      headerPdf.hide()\n\n    @_current\n\n  _showHelp: (e) ->\n    bootbox.alert $(e.currentTarget).data('help')\n\n  _generatePromptBody: =>\n    a = @_current.attributes\n    job_type = ChoicesSingleton.getTextById('job_type_options', a.job_type)\n    group_name = ChoicesSingleton.getTextById('group_name_options', a.group_id)\n\n    cost = @_current.cost\n    # check if profit_margin is a valid number\n    if isNaN(parseFloat(a.profit_margin)) or !isFinite(a.profit_margin)\n      total_cost = cost\n      profit_margin = 0\n    else\n      profit_margin = a.profit_margin\n      total_cost = cost + (cost * (a.profit_margin / 100))\n\n    concrete = \"\"\n    for item in a.concrete.models\n      item_text = item.overview().join('\\n')\n      concrete = \"#{concrete}#{item_text}\\n\\n\"\n\n    labor = \"\"\n    for item in a.labor.models\n      item_text = item.overview().join('\\n')\n      labor = \"#{labor}#{item_text}\\n\\n\"\n\n    materials = \"\"\n    for item in a.materials.models\n      item_text = item.overview().join('\\n')\n      materials = \"#{materials}#{item_text}\\n\\n\"\n\n    equipment = \"\"\n    for item in a.equipment.models\n      item_text = item.overview().join('\\n')\n      equipment = \"#{equipment}#{item_text}\\n\\n\"\n\n    subcontractor = \"\"\n    for item in a.subcontractor.models\n      item_text = item.overview().join('\\n')\n      subcontractor = \"#{subcontractor}#{item_text}\\n\\n\"\n\n    body = \"\"\"\n      Group: #{group_name}\n      Job name: #{a.job_name}\n      Job type: #{job_type}\n\n      Subtotal: #{cost.toFixed(2)}\n      Profit margin: #{profit_margin}%\n      Cost: #{total_cost.toFixed(2)}\n\n      Concrete:\n      #{concrete}\n      Labor:\n      #{labor}\n      Materials:\n      #{materials}\n      Equipment:\n      #{equipment}\n      Subcontractor:\n      #{subcontractor}\n    \"\"\"\n    return body\n\n  _promptPdf: (e) =>\n    filename = \"#{@_current.attributes.job_name}.pdf\"\n    body = @_generatePromptBody()\n\n    doc = new jsPDF()\n\n    doc.setFontSize(22)\n    doc.setFontType('bold')\n    doc.text 20, 20, \"Appstruction Proposal\"\n\n    doc.setFontSize(14)\n    doc.setFontType('normal')\n    doc.text 20, 30, body\n\n    doc.save filename\n\n  _promptEmail: (e) =>\n    subject = \"Appstruction proposal\"\n    body = @_generatePromptBody()\n    body = encodeURIComponent(body)\n    window.location.href = \"mailto:?subject=#{subject}&body=#{body}\";\n\n  # Delete the current job\n  _resetJob: =>\n    console.log \"Reseting job\"\n    @_current.destroy()\n    @_navigate 'home'\n    true\n\n  # Add the job to the saved collection\n  _saveJob: (evt) =>\n    console.log \"Saving job\"\n\n    if @_current.isValid()\n      @_current.save()\n      ChoicesSingleton.addJobGroup @_current\n      ChoicesSingleton.save()\n      @_jobs.add @_current\n      console.log JSON.stringify @_current.toJSON()\n      true\n    else\n      alert @_current.validationError\n      false\n\n  _addComponent: (routeType) =>\n    # Model\n    if routeType in ChoicesSingleton.get('job_routes')\n      @_current.get(routeType).add {}\n\n    # apply select2 to new dropdown fields\n    $('select').select2\n      allowClear: true\n      minimumResultsForSearch: 6\n\n    # apply keyup to new number fields\n    $(\"input[type=number]\").keyup ->\n      val = $(@).val()\n\n      # check if val starts with a period, if so append a \"0\" to the beginning\n      if val.lastIndexOf('.', 0) == 0\n        template = '.0000000000'\n        if val == template.substring(0, val.length)\n          return\n        new_val = '0' + val\n        $(@).val(new_val)\n\n    true\n\n  # Validate a component before adding a new one to the job\n  _validateComponent: (evt) =>\n    evt.preventDefault()\n    routeType = $(evt.currentTarget).data 'type'\n    console.log \"Validating #{routeType}\"\n\n    last = @_current.get(routeType).last()\n    if last.isValid()\n      # Add to the job's collection for saving and calculating\n      console.log \"Adding #{routeType} to active job\"\n      @_addComponent routeType\n    else\n      alert last.validationError\n\n    last\n\nmodule.exports = app = new Application\n","application = require \"application\"\n\n$ ->\n  Backbone.history.start()\n","application = require \"application\"\n\ncordovaClass = class CordovaApp\n  # Application Constructor\n  initialize: ->\n    @bindEvents()\n    true\n\n  # Bind Event Listeners\n  #\n  # Bind any events that are required on startup. Common events are:\n  # 'load', 'deviceready', 'offline', and 'online'.\n  bindEvents: ->\n    document.addEventListener 'deviceready', @onDeviceReady, false\n    true\n\n  # deviceready Event Handler\n  #\n  # The scope of 'this' is the event. In order to call the 'receivedEvent'\n  # function, we must explicity call 'app.receivedEvent(...);'\n  onDeviceReady: ->\n    Backbone.history.start()\n    app.receivedEvent 'deviceready'\n\n  # Update DOM on a Received Event\n  receivedEvent: (id) ->\n    parentElement = document.getElementById id\n    listeningElement = parentElement.querySelector '.listening'\n    receivedElement = parentElement.querySelector '.received'\n\n    listeningElement.setAttribute 'style', 'display:none;'\n    receivedElement.setAttribute 'style', 'display:block;'\n\n    console.log 'Received Event: ' + id\n    true\n\napp = new cordovaClass\n\napp.initialize()\n"]}